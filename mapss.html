<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…­å¼µçŠ/éºŸå…‰ 5é–“å¿…åƒå°åƒåœ°åœ–</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f8f9fa;
            color: #333;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        header {
            background-color: #ff6b6b;
            color: white;
            padding: 1rem;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            z-index: 1000;
            flex-shrink: 0;
        }

        header h1 {
            margin: 0;
            font-size: 1.5rem;
        }

        header p {
            margin: 5px 0 0;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        #container {
            display: flex;
            flex: 1;
            overflow: hidden;
            height: 100%;
        }

        /* åˆ—è¡¨å€åŸŸæ¨£å¼ */
        #sidebar {
            width: 400px;
            background: white;
            overflow-y: auto;
            box-shadow: 2px 0 5px rgba(0,0,0,0.05);
            z-index: 999;
            padding: 15px;
            display: flex;
            flex-direction: column;
        }

        /* å½±ç‰‡å€åŸŸæ¨£å¼ */
        .video-container {
            width: 100%;
            background: #000;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 20px;
            flex-shrink: 0; /* é˜²æ­¢å½±ç‰‡è¢«å£“ç¸® */
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
        }

        video {
            width: 100%;
            height: auto;
            display: block;
            max-height: 400px; /* é™åˆ¶æœ€å¤§é«˜åº¦ï¼Œé¿å…ä½”æ“šå¤ªå¤šåˆ—è¡¨ç©ºé–“ */
            object-fit: contain; /* ä¿æŒæ¯”ä¾‹ */
        }

        .shop-card {
            background: white;
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 5px solid #ddd;
        }

        .shop-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            border-left-color: #ff6b6b;
        }

        .shop-card.active {
            border-left-color: #ff6b6b;
            background-color: #fff0f0;
        }

        .shop-name {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 5px;
            color: #2c3e50;
        }

        .shop-rating {
            color: #f39c12;
            font-weight: bold;
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .shop-desc {
            font-size: 0.9rem;
            color: #666;
            line-height: 1.5;
            margin-bottom: 10px;
        }

        .badge {
            display: inline-block;
            background: #e9ecef;
            color: #495057;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            margin-right: 5px;
        }

        .nav-btn {
            display: block;
            width: 100%;
            text-align: center;
            background-color: #4285F4;
            color: white;
            text-decoration: none;
            padding: 8px 0;
            border-radius: 4px;
            font-size: 0.9rem;
            margin-top: 10px;
        }
        
        .nav-btn:hover {
            background-color: #3367d6;
        }

        /* åœ°åœ–å€åŸŸæ¨£å¼ */
        #map {
            flex: 1;
            height: 100%;
            z-index: 1;
        }

        /* RWD æ‰‹æ©Ÿç‰ˆèª¿æ•´ */
        @media (max-width: 768px) {
            #container {
                flex-direction: column-reverse;
            }
            #sidebar {
                width: 100%;
                height: 50%; /* æ‰‹æ©Ÿç‰ˆåˆ†ä¸€åŠçµ¦åˆ—è¡¨ */
                box-sizing: border-box;
            }
            #map {
                height: 50%;
            }
            .video-container {
                margin-bottom: 15px;
            }
            video {
                max-height: 250px; /* æ‰‹æ©Ÿç‰ˆå½±ç‰‡é«˜åº¦å†ç¸®å°ä¸€é» */
            }
        }
    </style>
</head>
<body>

<header>
    <h1>å…­å¼µçŠ/éºŸå…‰ å¿…åƒå°åƒåœ°åœ–</h1>
    <p>åœ¨åœ°äººæ¨è–¦çš„ 5 é–“å¹³åƒ¹ç¾é£Ÿ</p>
</header>

<div id="container">
    <div id="sidebar">
        <div class="video-container">
            <video controls autoplay muted loop playsinline>
                <source src="food_video.mp4" type="video/mp4">
                æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´å½±ç‰‡æ¨™ç±¤ã€‚
            </video>
        </div>
        
        <div id="shop-list">
            </div>
    </div>
    <div id="map"></div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

<script>
    // åº—å®¶è³‡æ–™æ•¸æ“š
    const locations = [
        {
            id: 1,
            name: "é˜¿æ¸…è±†æ¼¿",
            lat: 25.0216138,
            lng: 121.5542358,
            rating: 4.4,
            reviews: 498,
            tags: ["æ—©é¤", "å°ç± åŒ…"],
            desc: "æ™šä¾†åƒä¸åˆ°çš„è¶…äººæ°£å°ç± åŒ…ï¼Œä¸€é¡†8å…ƒï¼Œå…§é¤¡å¤šæ±é®®ç”œã€‚",
            address: "å’Œå¹³æ±è·¯ä¸‰æ®µ228å··15è™Ÿ",
            googleMapId: "ChIJ6z8UzTaqQjQRzD1MA2bt0HM"
        },
        {
            id: 2,
            name: "ç«ç´…æ‰‹æ¡¿éºµ",
            lat: 25.0204019,
            lng: 121.5541516,
            rating: 4.3,
            tags: ["éºµé£Ÿ", "ç¾é»ç¾æ‹‰"],
            desc: "ç¾é»ç¾åšçš„æ‰‹å·¥æ‰¯éºµï¼Œéºµæ¢éå¸¸æœ‰åš¼å‹ï¼Œæ¹¯é ­é…¸çˆ½é–‹èƒƒã€‚",
            address: "å®‰å±…è¡—46å··1è™Ÿ",
            googleMapId: "ChIJ4U2y1DCqQjQRpf9ZP2UUq38"
        },
        {
            id: 3,
            name: "æ±æ—å¤æœˆæ¤’é£Ÿ",
            lat: 25.0200341,
            lng: 121.5533112,
            rating: 4.5,
            tags: ["éŸ­èœç›’", "é‹è²¼"],
            desc: "åƒæ•é ­ä¸€æ¨£å¤§çš„éŸ­èœç›’ï¼Œè¡¨çš®ä¹¾çˆ½ã€å…§é¤¡æ¿•æ½¤ä¸æ²¹è†©ã€‚",
            address: "æ¨‚æ¥­è¡—137è™Ÿ",
            googleMapId: "ChIJKajexTCqQjQRtb8LMxYZF-I"
        },
        {
            id: 4,
            name: "é˜¿æ¸…å¸«æ¸¯å¼ç…é¤ƒè’¸é¤ƒ",
            lat: 25.0203361,
            lng: 121.5562778,
            rating: 4.3,
            tags: ["æ¸¯å¼", "ç…é¤ƒ"],
            desc: "å¤–çš®è–„é€ç…è‡³ç„¦è„†ï¼ŒéŸ­èœè¦ä»å…§é¤¡é£½æ»¿é®®ç”œã€‚",
            address: "å’Œå¹³æ±è·¯ä¸‰æ®µ308å··2è™Ÿ",
            googleMapId: "ChIJKU4P_TaqQjQRpRXdswbbHeQ"
        },
        {
            id: 5,
            name: "éº—é¦¥å°åƒåº—",
            lat: 25.0208376,
            lng: 121.5540979,
            rating: 4.2,
            tags: ["æ»·å‘³", "æ°´é¤ƒ"],
            desc: "éš±è—ç‰ˆæ°‘å®…å°åƒï¼Œæ»·å‘³åˆ‡å·¥ç´°ç·»ï¼Œæ°´é¤ƒç™½èœå…§é¤¡æ¸…ç”œã€‚",
            address: "å®‰å±…è¡—34å··8è™Ÿ",
            googleMapId: "ChIJySVU1TaqQjQR6LQChR1deSc"
        }
    ];

    // åˆå§‹åŒ–åœ°åœ–
    const map = L.map('map').setView([25.0208, 121.5545], 16);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
    }).addTo(map);

    const markers = {};
    const shopList = document.getElementById('shop-list'); // æ³¨æ„ï¼šé€™è£¡æ”¹æŠ“ shop-list å®¹å™¨

    // éæ­·æ•¸æ“šï¼Œå»ºç«‹æ¨™è¨˜å’Œåˆ—è¡¨
    locations.forEach(place => {
        // 1. å»ºç«‹åœ°åœ–æ¨™è¨˜
        const marker = L.marker([place.lat, place.lng]).addTo(map);
        
        const popupContent = `
            <b>${place.name}</b><br>
            â­ ${place.rating}<br>
            ${place.tags.join(' / ')}<br>
            <a href="https://www.google.com/maps/place/?q=place_id:${place.googleMapId}" target="_blank" style="color:#4285F4; text-decoration:underline;">Google Maps å°èˆª</a>
        `;
        marker.bindPopup(popupContent);
        markers[place.id] = marker;

        // 2. å»ºç«‹å´é‚Šæ¬„å¡ç‰‡
        const card = document.createElement('div');
        card.className = 'shop-card';
        card.setAttribute('data-id', place.id);
        
        const tagsHtml = place.tags.map(tag => `<span class="badge">${tag}</span>`).join('');
        
        card.innerHTML = `
            <div class="shop-name">${place.name}</div>
            <div class="shop-rating">â­ ${place.rating} ${place.reviews ? `(${place.reviews})` : ''}</div>
            <div class="shop-desc">${place.desc}</div>
            <div style="margin-bottom:8px;">${tagsHtml}</div>
            <div style="font-size:0.8rem; color:#888;">ğŸ“ ${place.address}</div>
            <a href="https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(place.name + ' ' + place.address)}" target="_blank" class="nav-btn" onclick="event.stopPropagation()">é–‹å•Ÿ Google Maps</a>
        `;

        card.addEventListener('click', () => {
            document.querySelectorAll('.shop-card').forEach(c => c.classList.remove('active'));
            card.classList.add('active');
            map.flyTo([place.lat, place.lng], 18, { animate: true, duration: 1 });
            marker.openPopup();
            if (window.innerWidth <= 768) {
                document.getElementById('map').scrollIntoView({behavior: 'smooth'});
            }
        });

        shopList.appendChild(card);
    });

    map.on('popupopen', function(e) {
        const marker = e.popup._source;
        const lat = marker.getLatLng().lat;
        const found = locations.find(p => Math.abs(p.lat - lat) < 0.00001);
        
        if (found) {
            document.querySelectorAll('.shop-card').forEach(c => c.classList.remove('active'));
            const activeCard = document.querySelector(`.shop-card[data-id="${found.id}"]`);
            if (activeCard) {
                activeCard.classList.add('active');
                // è®“åˆ—è¡¨æ»¾å‹•åˆ°è©²å¡ç‰‡ï¼Œä½†è¦æ‰£é™¤å½±ç‰‡é«˜åº¦çš„åç§»
                activeCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }
    });

</script>

</body>
</html>